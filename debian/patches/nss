Description: Build with NSS.
Origin: vendor
Forwarded: not-needed
Author: Ramakrishnan Muthukrishnan <vu3rdd@gmail.com>
Reviewed-by: Alessandro Ghedini <al3xbio@gmail.com>
Last-Update: 2011-11-01

--- a/configure.ac
+++ b/configure.ac
@@ -1759,7 +1759,7 @@
       CLEANCPPFLAGS="$CPPFLAGS"
       CLEANLDFLAGS="$LDFLAGS"

-      LIBS="$LIBS $addlib -lgcrypt"
+      LIBS="$LIBS $addlib"
       LDFLAGS="$LDFLAGS $addld"
       if test "$addcflags" != "-I/usr/include"; then
          CPPFLAGS="$CPPFLAGS $addcflags"
--- a/docs/examples/Makefile.am
+++ b/docs/examples/Makefile.am
@@ -48,7 +48,7 @@
 CPPFLAGS = -DCURL_NO_OLDIES $(STATICCPPFLAGS)

 # Dependencies
-LDADD = $(LIBDIR)/libcurl-gnutls.la
+LDADD = $(LIBDIR)/libcurl-nss.la

 # Makefile.inc provides the check_PROGRAMS and COMPLICATED_EXAMPLES defines
 include Makefile.inc
--- a/lib/Makefile.am
+++ b/lib/Makefile.am
@@ -42,7 +42,7 @@

 CLEANFILES = $(DSP) $(VCPROJ)

-lib_LTLIBRARIES = libcurl-gnutls.la
+lib_LTLIBRARIES = libcurl-nss.la
 LIBCURL_LIBS = @LIBCURL_LIBS@

 # This might hold -Werror
@@ -120,7 +120,7 @@
 VERSIONED_SYMBOLS = -Wl,--version-script=libcurl.vers
 endif

-libcurl_gnutls_la_LDFLAGS = $(UNDEF) $(VERSIONINFO) $(MIMPURE) $(VERSIONED_SYMBOLS) $(LIBCURL_LIBS)
+libcurl_nss_la_LDFLAGS = $(UNDEF) $(VERSIONINFO) $(MIMPURE) $(VERSIONED_SYMBOLS) $(LIBCURL_LIBS)

 # unit testing static library built only along with unit tests
 if BUILD_UNITTESTS
@@ -135,7 +135,7 @@
 # Makefile.inc provides the CSOURCES and HHEADERS defines
 include Makefile.inc

-libcurl_gnutls_la_SOURCES = $(CSOURCES) $(HHEADERS)
+libcurl_nss_la_SOURCES = $(CSOURCES) $(HHEADERS)
 libcurlu_la_SOURCES = $(CSOURCES) $(HHEADERS)

 WIN32SOURCES = $(CSOURCES)
--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -49,8 +49,8 @@
 # This might hold -Werror
 CFLAGS += @CURL_CFLAG_EXTRAS@

-curl_LDADD = $(top_builddir)/lib/libcurl-gnutls.la -lrt @CURL_LIBS@
-curl_DEPENDENCIES = $(top_builddir)/lib/libcurl-gnutls.la
+curl_LDADD = $(top_builddir)/lib/libcurl-nss.la -lrt @CURL_LIBS@
+curl_DEPENDENCIES = $(top_builddir)/lib/libcurl-nss.la
 BUILT_SOURCES = hugehelp.c config-win32.h
 CLEANFILES = hugehelp.c config-win32.h
 # Use the C locale to ensure that only ASCII characters appear in the
--- a/tests/libtest/Makefile.am
+++ b/tests/libtest/Makefile.am
@@ -54,8 +54,8 @@
 test1022.pl Makefile.inc

 # Dependencies (may need to be overriden)
-LDADD = $(top_builddir)/lib/libcurl-gnutls.la @CURL_LIBS@
-DEPENDENCIES = $(top_builddir)/lib/libcurl-gnutls.la
+LDADD = $(top_builddir)/lib/libcurl-nss.la @CURL_LIBS@
+DEPENDENCIES = $(top_builddir)/lib/libcurl-nss.la

 # Makefile.inc provides the source defines (TESTUTIL, SUPPORTFILES,
 # noinst_PROGRAMS, lib*_SOURCES, and lib*_CFLAGS)
